[Unit]
Description=cLawyer AI Assistant
After=cloud-sql-proxy.service docker.service
Requires=cloud-sql-proxy.service

[Service]
Type=simple
ExecStartPre=/usr/bin/docker pull us-central1-docker.pkg.dev/clawyer-prod/clawyer/agent:latest
ExecStart=/usr/bin/docker run --rm \
  --name clawyer \
  --env-file /opt/clawyer/.env \
  --network=host \
  us-central1-docker.pkg.dev/clawyer-prod/clawyer/agent:latest \
  --no-onboard
ExecStop=/usr/bin/docker stop clawyer
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
